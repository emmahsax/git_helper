# scripts [![Maintainability](https://api.codeclimate.com/v1/badges/ce1bdd719cc21b7c22a6/maintainability)](https://codeclimate.com/github/emmasax4/scripts/maintainability)

### Setup

A couple of the scripts in this project utilize special GitHub or GitLab configuration. To provide access tokens for this, create a `.git_config.yml` file in your home directory. The contents should look like this:

```
:github_user: GITHUB-USERNAME
:github_token: GITHUB-TOKEN
:gitlab_user: GITLAB-USERNAME
:gitlab_token: GITLAB-TOKEN
```

To install required gem dependencies, run the following in your repository's directory:

```
gem install highline
gem install octokit
gem install gitlab
```

### Scripts

Various scripts that I have written to be able to do things on the command line easier.

#### `change_remote.rb`

I used this script when I switched my GitHub username from `emmasax1` to `emmasax4`. When you switch a username, GitHub only makes some changes for you. I had to go through each repository "manually" and turn the remotes from each one into a remote with the new username.

This script will go through every directory in a directory, see if it is a git directory, and then will check to see if the old username is included in the remote URL of that git directory. If it is, then the script will change the remote URL to instead point to the new username's remote URL.

#### `prune-merged-branches`

This script, courtesy of [@nicksieger](https://github.com/nicksieger), runs on a single repository, which you should be in. Then, it will pull all of the branches that have a 'merged' status, and will delete any branches that had merged PRs at least four weeks ago.

This script is particularly nice when you're in a repository that has a ton of stale branches.

#### `prune_branches_from_repos.rb`

This script makes use of the `prune-merged-branches` script, and can be used to loop through a bunch of repositories on somebody's machine (in a single directory), and will call the `prune-merged-branches` on every repository in that directory. Depending on the number of repositories and the amount of branches on each one, running this can take a LONG time.

#### `new_branch.rb`

This script is useful for making new branches in a repository on the command line. To run the script, you must currently be `cd`ed into the repository on your local machine that you want to make the new branch for. Then, run:

```
/path/to/this/directory/new_branch.rb
```

The script will ask you for the name of your new branch. Make sure your input does not contain any spaces or special characters.

#### `pull_request.rb`

This script can be used to handily make new GitHub pull requests and to merge pull requests from the command line. The script uses the [`Octokit::Client`](https://octokit.github.io/octokit.rb/Octokit/Client.html) to do this, so make sure you have a `.git_config.yml` file set up in the home directory of your computer. For instructions on how to do that, see [Setup](#setup).

After setup is complete, you can call the file, and send in a flag indicating whether to create a pull request, `-c`, or to merge a pull request, `-m`.

```
/path/to/this/directory/pull_request.rb -c
/path/to/this/directory/pull_request.rb -m
```

If you're trying to create a pull request, the script will provide an autogenerated pull request title based on your branch name (separated by `_`). You can respond 'yes' or 'no'. If you respond 'no', you can provide your own pull request title. The script will also ask you if the default branch of the repository is the proper base branch to use. You can say 'yes' or 'no'. If you respond 'no', then you can give the script your chosen base base.

If you're requesting to merge a pull request, the script will ask you the number ID of the pull request you wish to merge. The script will also ask you what type of merge to do: regular merging, squashing, or rebasing. The commit message to use during the merge/squash will be the title of the pull request.

If you're getting stuck, you can run the command with a `--help` flag instead, to get some more information.

#### `merge_request.rb`

This script can be used to handily make new GitLab merge requests and to accept merge requests from the command line. The script uses the Ruby wrapper [`Gitlab`](https://github.com/NARKOZ/gitlab) to do this, so make sure you have a `.git_config.yml` file set up in the home directory of your computer. For instructions on how to do that, see [Setup](#setup).

After setup is complete, you can call the file, and send in a flag indicating whether to create a pull request, `-c`, or to merge a pull request, `-m`.

```
/path/to/this/directory/merge_request.rb -c
/path/to/this/directory/merge_request.rb -m
```

If you're requesting to merge a merge request, the script will ask you the number ID of the merge request you wish to accept. **The script will squash the merge request and will delete the source branch upon merging.** If you're trying to create a merge request, the script will provide an autogenerated merge request title based on your branch name (separated by `_`). You can respond 'yes' or 'no'. If you respond 'no', you can provide your own merge request title. The script will also ask you if the default branch of the repository is the proper base branch to use. You can say 'yes' or 'no'. If you respond 'no', then you can give the script your chosen base base.

If you're getting stuck, you can run the command with a `--help` flag instead, to get some more information.
